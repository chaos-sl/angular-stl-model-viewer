{"version":3,"file":"angular-stl-model-viewer.js","sources":["../../../projects/angular-stl-model-viewer/src/lib/angular-stl-model-viewer.component.ts","../../../projects/angular-stl-model-viewer/src/lib/angular-stl-model-viewer.module.ts","../../../projects/angular-stl-model-viewer/src/lib/stl-snapshot.service.ts","../../../projects/angular-stl-model-viewer/src/public-api.ts","../../../projects/angular-stl-model-viewer/src/angular-stl-model-viewer.ts"],"sourcesContent":["import {\r\n  Component,\r\n  ElementRef,\r\n  EventEmitter,\r\n  Input,\r\n  NgZone,\r\n  OnDestroy,\r\n  OnInit,\r\n  Output,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n} from '@angular/core';\r\n\r\nimport * as THREE from 'three';\r\n\r\nimport { STLLoader } from 'three/examples/jsm/loaders/STLLoader';\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\r\nimport { LightProbeGenerator } from 'three/examples/jsm/lights/LightProbeGenerator.js';\r\nimport { Vector3 } from 'three';\r\n\r\nexport enum RotateDirection {\r\n  up,\r\n  right,\r\n  down,\r\n  left,\r\n  none,\r\n}\r\nexport enum ZoomDirection {\r\n  in,\r\n  out,\r\n}\r\nexport interface MeshOptions {\r\n  castShadow?: boolean;\r\n  position?: THREE.Vector3;\r\n  receiveShadow?: boolean;\r\n  scale?: THREE.Vector3;\r\n  up?: THREE.Vector3;\r\n  userData?: { [key: string]: any };\r\n  visible?: boolean;\r\n}\r\n\r\nconst defaultMeshOptions = {\r\n  castShadow: true,\r\n  position: new THREE.Vector3(0, 0, 0),\r\n  receiveShadow: true,\r\n  scale: new THREE.Vector3(1, 1, 1),\r\n};\r\n\r\nfunction isWebGLAvailable() {\r\n  try {\r\n    const canvas = document.createElement('canvas');\r\n    return !!(\r\n      window.WebGLRenderingContext &&\r\n      (canvas.getContext('webgl') || canvas.getContext('experimental-webgl'))\r\n    );\r\n  } catch (e) {\r\n    return false;\r\n  }\r\n}\r\n\r\n@Component({\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  selector: 'stl-model-viewer',\r\n  styles: [\r\n    `\r\n      :host {\r\n        width: 100%\r\n        height: 100%\r\n        display: block\r\n      }\r\n    `,\r\n  ],\r\n  template: '',\r\n})\r\nexport class StlModelViewerComponent implements OnInit, OnDestroy {\r\n  private _models = [];\r\n  @Input() set stlModels(models: (string | ArrayBuffer)[]) {\r\n    this._models = models;\r\n    this.refreshMeshGroup();\r\n  }\r\n  get stlModels() {\r\n    return this._models;\r\n  }\r\n  @Input() hasControls = true;\r\n  @Input() camera: THREE.PerspectiveCamera = new THREE.PerspectiveCamera(\r\n    15,\r\n    window.innerWidth / window.innerHeight\r\n  );\r\n\r\n  @Input() cameraTarget: THREE.Vector3 = new THREE.Vector3(0, 0, 0);\r\n  @Input() light: THREE.Light = new THREE.DirectionalLight(0xffffff, 1);\r\n  @Input() material: THREE.Material = new THREE.MeshPhongMaterial({\r\n    color: 0xc4c4c4,\r\n    shininess: 100,\r\n    specular: 0x111111,\r\n  });\r\n  @Input() scene: THREE.Scene = new THREE.Scene();\r\n  @Input() renderer: THREE.WebGLRenderer = new THREE.WebGLRenderer({\r\n    antialias: true,\r\n  });\r\n  @Input() controls: any | null = null;\r\n  @Input() meshOptions: MeshOptions[] = [];\r\n\r\n  @Output() rendered = new EventEmitter<void>();\r\n\r\n  xzAngle = 0; // Azimuthal angle\r\n  yzAngle = 0; // Polar angle\r\n  distance = 10; // PerspectiveCamera distance\r\n  zoomFactor = 0; // OrthographicCamera zoom\r\n\r\n  texture: THREE.CubeTexture;\r\n\r\n  hasWebGL = isWebGLAvailable();\r\n  meshGroup = new THREE.Object3D();\r\n  isRendered = false;\r\n  showStlModel = true;\r\n  stlLoader = new STLLoader();\r\n  lightProbe = new THREE.LightProbe(undefined, 1);\r\n\r\n  constructor(\r\n    private cdr: ChangeDetectorRef,\r\n    private eleRef: ElementRef,\r\n    private ngZone: NgZone\r\n  ) {\r\n    this.cdr.detach();\r\n    // default light position\r\n    this.light.position.set(10, 10, 10);\r\n\r\n    // default camera position\r\n    this.camera.position.set(0, this.distance, 0);\r\n    this.camera.lookAt(0, 0, 0);\r\n\r\n    // default scene background\r\n    this.scene.background = new THREE.Color(0xdcdcdc);\r\n    new THREE.CubeTextureLoader().load(\r\n      this.genCubeUrls('assets/', '.png'),\r\n      (cubeTexture) => {\r\n        cubeTexture.encoding = THREE.sRGBEncoding;\r\n        this.lightProbe.copy(LightProbeGenerator.fromCubeTexture(cubeTexture));\r\n        // this.scene.background = cubeTexture;\r\n        this.texture = cubeTexture;\r\n        this.material = new THREE.MeshStandardMaterial({\r\n          color: 0xffffff,\r\n          metalness: 0.4,\r\n          roughness: 0.2,\r\n          envMap: cubeTexture,\r\n          envMapIntensity: 1,\r\n        });\r\n      }\r\n    );\r\n\r\n    // default renderer options\r\n    this.renderer.setPixelRatio(window.devicePixelRatio);\r\n    this.renderer.shadowMap.enabled = true;\r\n  }\r\n\r\n  // envmap\r\n  private genCubeUrls(prefix, postfix) {\r\n    return [\r\n      prefix + 'bg' + postfix,\r\n      prefix + 'bg' + postfix,\r\n      prefix + 'bg' + postfix,\r\n      prefix + 'bg' + postfix,\r\n      prefix + 'bg' + postfix,\r\n      prefix + 'bg' + postfix,\r\n    ];\r\n  }\r\n\r\n  ngOnInit() {\r\n    if (!this.hasWebGL) {\r\n      console.error(\r\n        'stl-model-viewer: Seems like your system does not support webgl.'\r\n      );\r\n      return;\r\n    }\r\n\r\n    this.ngZone.runOutsideAngular(() => {\r\n      this.init();\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    window.removeEventListener('resize', this.onWindowResize, false);\r\n\r\n    this.meshGroup.remove();\r\n\r\n    if (this.renderer) {\r\n      this.renderer.renderLists.dispose();\r\n      this.renderer.dispose();\r\n    }\r\n\r\n    if (this.camera) {\r\n      this.camera.remove();\r\n    }\r\n\r\n    if (this.light) {\r\n      this.light.remove();\r\n    }\r\n\r\n    if (this.material) {\r\n      this.material.dispose();\r\n    }\r\n\r\n    if (this.controls) {\r\n      this.controls.removeEventListener('change', this.render);\r\n      this.controls.dispose();\r\n    }\r\n\r\n    if (this.scene) {\r\n      this.scene.children.forEach((child) => {\r\n        this.scene.remove(child);\r\n      });\r\n      this.scene.dispose();\r\n    }\r\n  }\r\n\r\n  zoom(direction: ZoomDirection, stepCount = 1) {\r\n    if (this.camera instanceof THREE.PerspectiveCamera) {\r\n      switch (direction) {\r\n        case ZoomDirection.in:\r\n          this.distance += stepCount;\r\n          break;\r\n        case ZoomDirection.out:\r\n          this.distance -= stepCount;\r\n          break;\r\n      }\r\n      this.distance = this.distance < 0 ? 0 : this.distance;\r\n    }\r\n    this.rotate(RotateDirection.none);\r\n  }\r\n  rotate(direction: RotateDirection, stepCount = 1) {\r\n    let step = 0;\r\n    switch (direction) {\r\n      case RotateDirection.up:\r\n        step = 0.1;\r\n        break;\r\n      case RotateDirection.right:\r\n        this.xzAngle += 0.1;\r\n        break;\r\n      case RotateDirection.down:\r\n        step = -0.1;\r\n        break;\r\n      case RotateDirection.left:\r\n        this.xzAngle -= 0.1;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    if (Math.abs(this.yzAngle + step * stepCount) < Math.PI / 2) {\r\n      this.yzAngle += step;\r\n    } else {\r\n      this.yzAngle = step > 0 ? Math.PI / 2 : -Math.PI / 2;\r\n    }\r\n    this.camera.position.x =\r\n      this.distance * Math.cos(this.yzAngle) * Math.cos(this.xzAngle);\r\n    this.camera.position.z =\r\n      this.distance * Math.cos(this.yzAngle) * Math.sin(this.xzAngle);\r\n    this.camera.position.y = this.distance * Math.sin(this.yzAngle);\r\n    this.camera.lookAt(0, 0, 0);\r\n    this.render();\r\n  }\r\n\r\n  private async init() {\r\n    this.scene.add(this.lightProbe);\r\n    this.camera.add(this.light);\r\n    this.scene.add(this.camera);\r\n\r\n    // use default controls\r\n    if (this.hasControls && !this.controls) {\r\n      this.controls = new OrbitControls(this.camera, this.renderer.domElement);\r\n      this.controls.enableZoom = true;\r\n\r\n      this.controls.addEventListener('change', this.render);\r\n    }\r\n\r\n    window.addEventListener('resize', this.onWindowResize, false);\r\n\r\n    await this.refreshMeshGroup();\r\n\r\n    this.scene.add(this.meshGroup);\r\n    this.eleRef.nativeElement.appendChild(this.renderer.domElement);\r\n    this.setSizes();\r\n    this.render();\r\n    this.ngZone.run(() => {\r\n      this.isRendered = true;\r\n      this.rendered.emit();\r\n      this.cdr.detectChanges();\r\n    });\r\n  }\r\n\r\n  async refreshMeshGroup() {\r\n    this.meshGroup.remove(...this.meshGroup.children);\r\n    const meshCreations = this.stlModels\r\n      .filter((x) => x)\r\n      .map((modelPath, index) => {\r\n        return this.createMesh(modelPath, this.meshOptions[index]);\r\n      });\r\n    const meshes: THREE.Object3D[] = await Promise.all(meshCreations);\r\n\r\n    meshes.map((mesh) => this.meshGroup.add(mesh));\r\n    this.rotate(RotateDirection.none);\r\n  }\r\n\r\n  async createMesh(\r\n    path: string | ArrayBuffer,\r\n    meshOptions: MeshOptions = {}\r\n  ): Promise<THREE.Mesh> {\r\n    const geometry: THREE.BufferGeometry =\r\n      typeof path === 'string'\r\n        ? await this.stlLoader.loadAsync(path)\r\n        : await this.stlLoader.parse(path);\r\n\r\n    geometry.computeBoundingBox();\r\n    geometry.center();\r\n    const { x, y, z } = geometry.boundingBox.max;\r\n    this.distance = Math.max(x, y, z) * 10;\r\n\r\n    const mesh = new THREE.Mesh(geometry, this.material);\r\n    mesh.rotateOnWorldAxis(new THREE.Vector3(0, 1, 0), -Math.PI / 2);\r\n    const vectorOptions = ['position', 'scale', 'up'];\r\n    const options = Object.assign({}, defaultMeshOptions, meshOptions);\r\n\r\n    Object.getOwnPropertyNames(options).forEach((option) => {\r\n      if (vectorOptions.indexOf(option) > -1) {\r\n        const vector = options[option] as Vector3;\r\n        const meshVectorOption = mesh[option] as Vector3;\r\n        meshVectorOption.set(vector.x, vector.y, vector.z);\r\n      } else {\r\n        mesh[option] = options[option];\r\n      }\r\n    });\r\n\r\n    return mesh;\r\n  }\r\n\r\n  render = () => {\r\n    this.renderer.render(this.scene, this.camera);\r\n  };\r\n\r\n  setSizes() {\r\n    const width = this.eleRef.nativeElement.offsetWidth;\r\n    const height = this.eleRef.nativeElement.offsetHeight;\r\n\r\n    this.camera.aspect = width / height;\r\n    this.camera.updateProjectionMatrix();\r\n\r\n    this.renderer.setSize(width, height);\r\n  }\r\n\r\n  onWindowResize = () => {\r\n    this.setSizes();\r\n    this.render();\r\n  };\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { StlModelViewerComponent } from './angular-stl-model-viewer.component';\r\n\r\n@NgModule({\r\n  declarations: [StlModelViewerComponent],\r\n  exports: [StlModelViewerComponent],\r\n  imports: [],\r\n})\r\nexport class StlModelViewerModule {}\r\n","import * as THREE from 'three';\r\nimport { BufferGeometry } from 'three';\r\nimport { STLLoader } from 'three/examples/jsm/loaders/STLLoader';\r\n\r\nconst MATERIAL_0 = (color = 0xffffff) =>\r\n  new THREE.MeshPhongMaterial({\r\n    color,\r\n    flatShading: true,\r\n    side: THREE.DoubleSide,\r\n    wireframe: false,\r\n  });\r\nconst LIGHT_0 = new THREE.AmbientLight(0xffffff, 0.3);\r\nconst LIGHT_1 = new THREE.DirectionalLight(0xffffff, 0.2);\r\nLIGHT_1.position.set(-100, -100, 100);\r\nLIGHT_1.lookAt(new THREE.Vector3(0, 0, 0));\r\nconst LIGHT_2 = new THREE.DirectionalLight(0xffffff, 0.2);\r\nLIGHT_2.position.set(100, 0, 0);\r\nLIGHT_2.lookAt(new THREE.Vector3(0, 0, 0));\r\nconst LIGHT_3 = new THREE.DirectionalLight(0xffffff, 0.2);\r\nLIGHT_3.position.set(-20, 100, 0);\r\nLIGHT_3.lookAt(new THREE.Vector3(0, 0, 0));\r\nconst LIGHT_4 = new THREE.DirectionalLight(0xffffff, 0.4);\r\nLIGHT_4.position.set(50, 50, 0);\r\nLIGHT_4.lookAt(new THREE.Vector3(-100, 0, 0));\r\n\r\nexport type SnapShotResult = {\r\n  images: string[];\r\n  sideLength: number;\r\n  ppmm: number;\r\n};\r\n\r\nexport class StlSnapshotService {\r\n  canvas: HTMLCanvasElement = document.createElement('canvas');\r\n  renderer: THREE.WebGLRenderer = new THREE.WebGLRenderer({\r\n    alpha: true,\r\n    antialias: true,\r\n    canvas: this.canvas,\r\n  });\r\n  camera: THREE.OrthographicCamera;\r\n  stlLoader: STLLoader = new STLLoader();\r\n  scene: THREE.Scene = new THREE.Scene();\r\n  objects = new THREE.Group();\r\n  lights = new THREE.Group();\r\n  geometry: BufferGeometry;\r\n  sideLength = 0;\r\n  constructor(private file: File | ArrayBuffer, private ppmm: number) {}\r\n  async read(): Promise<ArrayBuffer> {\r\n    if (this.file instanceof File) {\r\n      this.file = await new Promise((resolve, reject) => {\r\n        const reader = new FileReader();\r\n        reader.onload = () => resolve(reader.result as ArrayBuffer);\r\n        reader.readAsArrayBuffer(this.file as File);\r\n      });\r\n    }\r\n    return this.file as ArrayBuffer;\r\n  }\r\n  async snapshot(fileSave?: (data: string) => void): Promise<SnapShotResult> {\r\n    this.init(await this.read());\r\n    return this.shot(fileSave);\r\n  }\r\n  private init(data: ArrayBuffer) {\r\n    this.geometry = this.stlLoader.parse(data);\r\n    this.geometry.computeBoundingBox();\r\n    this.geometry.center();\r\n    this.geometry.computeBoundingSphere();\r\n    const { max, min } = this.geometry.boundingBox;\r\n    this.sideLength = Math.ceil(\r\n      Math.max(max.x - min.x, max.y - min.y, max.z - min.z)\r\n    );\r\n    this.canvas.height = this.canvas.width = this.sideLength;\r\n    this.camera = new THREE.OrthographicCamera(\r\n      -this.sideLength / 2,\r\n      this.sideLength / 2,\r\n      this.sideLength / 2,\r\n      -this.sideLength / 2,\r\n      1,\r\n      1000\r\n    );\r\n    this.camera.position.set(0, 0, 100);\r\n    this.camera.lookAt(new THREE.Vector3(0, 0, 0));\r\n    this.lights.add(LIGHT_0, LIGHT_1, LIGHT_2, LIGHT_3);\r\n    this.camera.add(LIGHT_4);\r\n    this.objects.add(new THREE.Mesh(this.geometry, MATERIAL_0(0xffffff)));\r\n    this.scene.add(this.camera, this.objects, this.lights);\r\n  }\r\n  private shot(fileSave?: (data: string) => void) {\r\n    const images = [];\r\n    const positions = [\r\n      [0, 0, 100, -1, 0, 0],\r\n      [0, 0, -100, 1, 0, 0],\r\n      [0, 100, 50, 0, 0, -1],\r\n      [100, 0, 50, 0, 0, -1],\r\n      [0, 100, -50, 0, 0, 1],\r\n      [100, 0, -50, 0, 0, 1],\r\n    ];\r\n\r\n    for (const p of positions) {\r\n      this.camera.position.set(p[0], p[1], p[2]);\r\n      this.camera.up.set(p[3], p[4], p[5]);\r\n      this.camera.lookAt(new THREE.Vector3(0, 0, 0));\r\n      this.camera.updateProjectionMatrix();\r\n      this.renderer.render(this.scene, this.camera);\r\n      const dataURL = this.canvas.toDataURL('image/png');\r\n      images.push(dataURL);\r\n      if (fileSave) {\r\n        fileSave(dataURL.replace(/^data:image\\/\\w+;base64,/, ''));\r\n      }\r\n    }\r\n    return {\r\n      images,\r\n      sideLength: this.sideLength,\r\n      ppmm: this.ppmm,\r\n    };\r\n  }\r\n}\r\n","/*\r\n * Public API Surface of angular-stl-model-viewer\r\n */\r\n\r\nexport * from './lib/angular-stl-model-viewer.component';\r\nexport * from './lib/angular-stl-model-viewer.module';\r\nexport * from './lib/stl-snapshot.service';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["THREE.Vector3","THREE.PerspectiveCamera","THREE.DirectionalLight","THREE.MeshPhongMaterial","THREE.Scene","THREE.WebGLRenderer","THREE.Object3D","THREE.LightProbe","THREE.Color","THREE.CubeTextureLoader","THREE.sRGBEncoding","THREE.MeshStandardMaterial","THREE.Mesh","THREE.DoubleSide","THREE.AmbientLight","THREE.Group","THREE.OrthographicCamera"],"mappings":"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"}